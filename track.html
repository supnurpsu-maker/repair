<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Status</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        :root { --primary: #000080; --accent: #FBCEB1; }
        body { font-family: sans-serif; background: #f4f7f6; padding: 20px; }
        .card { background: white; max-width: 400px; margin: auto; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 8px solid var(--primary); padding: 25px; }
        h2 { text-align: center; color: var(--primary); margin-top: 0; }
        input { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 18px; text-align: center; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; margin-top: 15px; font-weight: bold; cursor: pointer; }
        .result { display: none; margin-top: 25px; }
        .tag-row { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .tag { padding: 4px 12px; border-radius: 15px; font-size: 12px; font-weight: bold; color: var(--primary); background: var(--accent); }
        .priority-tag { background: #000080; color: white; } /* ‡πÅ‡∏ñ‡∏ö Priority ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏° */
        
        /* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏•‡∏∞ 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á */
        .item-row { display: flex; flex-direction: column; padding: 10px 0; border-bottom: 1px solid #eee; }
        .label { font-size: 12px; color: #888; margin-bottom: 2px; }
        .val { font-size: 15px; color: #333; font-weight: 500; }
    </style>
</head>
<body>
<div class="card">
    <h2>üîç ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h2>
    <input type="number" id="tid" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏á‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1 ‡∏´‡∏£‡∏∑‡∏≠ 001">
    <button class="btn" onclick="track()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

    <div id="result" class="result">
        <div class="tag-row">
            <span id="rStat" class="tag"></span>
            <span id="rPrio" class="tag priority-tag"></span>
        </div>
        
        <div class="item-row">
            <span class="label">üìÖ ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á:</span>
            <span id="rTime" class="val"></span>
        </div>
        <div class="item-row">
            <span class="label">üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà:</span>
            <span id="rRoom" class="val"></span>
        </div>
        <div class="item-row">
            <span class="label">‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á:</span>
            <span id="rIssue" class="val"></span>
        </div>
        <div class="item-row">
            <span class="label">üõ† ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô:</span>
            <span id="rAdmin" class="val" style="color:var(--primary)"></span>
        </div>
    </div>
</div>
<script>
    const URL = "https://script.google.com/macros/s/AKfycbw0gKLCAq2p2LZ39KQRazud5OZZSshDhfh-GoGr7i4oC3rw3DFC8v_geMrbrcSEVGQr/exec"; const LIFF_ID = "2008875334-wOYUvNha";
    let myUid = "";
    async function init() {
        await liff.init({ liffId: LIFF_ID });
        if(!liff.isLoggedIn()) liff.login();
        const p = await liff.getProfile(); myUid = p.userId;
    }
    async function track() {
        const tid = document.getElementById('tid').value;
        const res = await fetch(`${URL}?action=track&tid=${tid}&uid=${myUid}`);
        const d = await res.json();
        if(d.found) {
            document.getElementById('rStat').innerText = "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: " + d.status;
            document.getElementById('rPrio').innerText = "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: " + d.priority;
            document.getElementById('rTime').innerText = d.time;
            document.getElementById('rRoom').innerText = d.room;
            document.getElementById('rIssue').innerText = d.issue;
            document.getElementById('rAdmin').innerText = d.admin;
            document.getElementById('result').style.display = 'block';
        } else alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ");
    }
    init();
</script>
</body>
</html>
